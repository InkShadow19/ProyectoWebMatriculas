<!-- begin::Menu wrapper -->
<div id="kt_app_sidebar_menu_scroll" class="scroll-y my-5 mx-3" data-kt-scroll="true" data-kt-scroll-activate="true"
  data-kt-scroll-height="auto" data-kt-scroll-dependencies="#kt_app_sidebar_logo, #kt_app_sidebar_footer"
  data-kt-scroll-wrappers="#kt_app_sidebar_menu" data-kt-scroll-offset="5px" data-kt-scroll-save-state="true">
  <!-- begin::Menu -->
  <div class="menu menu-column menu-rounded menu-sub-indention fw-semibold fs-6" id="#kt_app_sidebar_menu"
    data-kt-menu="true" data-kt-menu-expand="false">

    <!-- Ítem: Dashboard -->
    <div class="menu-item">
      <a class="menu-link without-sub" routerLinkActive="active" routerLink="/dashboard">
        <span class="menu-icon">
          <app-keenicon name="element-11" class="fs-2"></app-keenicon>
        </span>
        <span class="menu-title">Dashboard</span>
      </a>
    </div>

    <!-- Separador "Opciones" -->
    <div class="menu-item">
      <div class="menu-content pt-8 pb-2">
        <span class="menu-section text-muted text-uppercase fs-8 ls-1">Opciones</span>
      </div>
    </div>

    <!-- Ítem: Matrículas -->
    <div class="menu-item">
      <a class="menu-link without-sub" routerLink="/matriculas" routerLinkActive="active">
        <span class="menu-icon">
          <app-keenicon name="notepad-edit" class="fs-2"></app-keenicon>
        </span>
        <span class="menu-title">Matrículas</span>
      </a>
    </div>

    <!-- Ítem: Pagos -->
    <div class="menu-item">
      <a class="menu-link without-sub" routerLink="/pagos" routerLinkActive="active">
        <span class="menu-icon">
          <app-keenicon name="dollar" class="fs-2"></app-keenicon>
        </span>
        <span class="menu-title">Pagos</span>
      </a>
    </div>

    <!-- Ítem: Reportes -->
    <div class="menu-item">
      <a class="menu-link without-sub" routerLink="/reportes" routerLinkActive="active">
        <span class="menu-icon">
          <app-keenicon name="chart-simple" class="fs-2"></app-keenicon>
        </span>
        <span class="menu-title">Reportes</span>
      </a>
    </div>

    <!-- Ítem Desplegable: Personas -->
    <div class="menu-item menu-accordion" data-kt-menu-trigger="click">
      <span class="menu-link">
        <span class="menu-icon">
          <app-keenicon name="profile-circle" class="fs-2"></app-keenicon>
        </span>
        <span class="menu-title">Personas</span>
        <span class="menu-arrow"></span>
      </span>
      <div class="menu-sub menu-sub-accordion">
        <div class="menu-item">
          <a class="menu-link without-sub" routerLink="/estudiantes" routerLinkActive="active">
            <span class="menu-bullet"><span class="bullet bullet-dot"></span></span>
            <span class="menu-title">Estudiantes</span>
          </a>
        </div>
        <div class="menu-item">
          <a class="menu-link without-sub" routerLink="/apoderados" routerLinkActive="active">
            <span class="menu-bullet"><span class="bullet bullet-dot"></span></span>
            <span class="menu-title">Apoderados</span>
          </a>
        </div>
      </div>
    </div>

    <div *ngIf="isAdmin()">
      <!-- Separador "Administración" -->
      <div class="menu-item">
        <div class="menu-content pt-8 pb-2">
          <span class="menu-section text-muted text-uppercase fs-8 ls-1">Administración</span>
        </div>
      </div>

      <!-- Ítem Desplegable: Configuración -->
      <div class="menu-item menu-accordion" data-kt-menu-trigger="click">
        <span class="menu-link">
          <span class="menu-icon">
            <app-keenicon name="setting-2" class="fs-2"></app-keenicon>
          </span>
          <span class="menu-title">Configuración</span> <!-- Título simplificado -->
          <span class="menu-arrow"></span>
        </span>
        <!-- Nivel 1 de Sub-menú -->
        <div class="menu-sub menu-sub-accordion">

          <!-- Sub-Ítem Desplegable: Seguridad -->
          <div class="menu-item menu-accordion" data-kt-menu-trigger="click">
            <span class="menu-link">
              <span class="menu-icon">
                <app-keenicon name="shield-tick" class="fs-4"></app-keenicon>
              </span>
              <span class="menu-title">Seguridad</span>
              <span class="menu-arrow"></span>
            </span>
            <!-- Nivel 2 de Sub-menú -->
            <div class="menu-sub menu-sub-accordion">
              <div class="menu-item">
                <a class="menu-link without-sub" routerLink="/admin" routerLinkActive="active">
                  <span class="menu-bullet"><span class="bullet bullet-dot"></span></span>
                  <span class="menu-title">Usuarios del Sistema</span>
                </a>
              </div>
              <div class="menu-item">
                <a class="menu-link without-sub" routerLink="/roles" routerLinkActive="active">
                  <span class="menu-bullet"><span class="bullet bullet-dot"></span></span>
                  <span class="menu-title">Roles</span>
                </a>
              </div>
            </div>
          </div>

          <!-- Sub-Ítem Desplegable: Gestión Académica -->
          <div class="menu-item menu-accordion" data-kt-menu-trigger="click">
            <span class="menu-link">
              <span class="menu-icon">
                <app-keenicon name="book-open" class="fs-4"></app-keenicon>
              </span>
              <span class="menu-title">Gestión Académica</span>
              <span class="menu-arrow"></span>
            </span>
            <!-- Nivel 2 de Sub-menú -->
            <div class="menu-sub menu-sub-accordion">
              <div class="menu-item">
                <a class="menu-link without-sub" routerLink="/anios-academicos" routerLinkActive="active">
                  <span class="menu-bullet"><span class="bullet bullet-dot"></span></span>
                  <span class="menu-title">Años Académicos</span>
                </a>
              </div>
              <div class="menu-item">
                <!-- El link ahora apunta a la ruta padre. Angular seleccionará la pestaña "niveles" por defecto -->
                <a class="menu-link without-sub" routerLink="/niveles" routerLinkActive="active">
                  <span class="menu-bullet"><span class="bullet bullet-dot"></span></span>
                  <span class="menu-title">Niveles</span>
                </a>
              </div>
              <div class="menu-item">
                <!-- El link ahora apunta a la ruta padre. Angular seleccionará la pestaña "grados" por defecto -->
                <a class="menu-link without-sub" routerLink="/grados" routerLinkActive="active">
                  <span class="menu-bullet"><span class="bullet bullet-dot"></span></span>
                  <span class="menu-title">Grados</span>
                </a>
              </div>
            </div>
          </div>

          <!-- Sub-Ítem Desplegable: Gestión Financiera -->
          <div class="menu-item menu-accordion" data-kt-menu-trigger="click">
            <span class="menu-link">
              <span class="menu-icon">
                <app-keenicon name="bank" class="fs-4"></app-keenicon>
              </span>
              <span class="menu-title">Gestión Financiera</span>
              <span class="menu-arrow"></span>
            </span>
            <!-- Nivel 2 de Sub-menú -->
            <div class="menu-sub menu-sub-accordion">
              <div class="menu-item">
                <a class="menu-link without-sub" routerLink="/conceptos-pago" routerLinkActive="active">
                  <span class="menu-bullet"><span class="bullet bullet-dot"></span></span>
                  <span class="menu-title">Conceptos de Pago</span>
                </a>
              </div>
              <div class="menu-item">
                <a class="menu-link without-sub" routerLink="/bancos" routerLinkActive="active">
                  <span class="menu-bullet"><span class="bullet bullet-dot"></span></span>
                  <span class="menu-title">Bancos</span>
                </a>
              </div>
            </div>
          </div>

        </div>
      </div>

    </div>
    <!--end::Menu-->
  </div>
  <!--end::Menu wrapper-->
</div>